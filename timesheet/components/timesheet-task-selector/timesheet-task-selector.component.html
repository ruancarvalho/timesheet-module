<mat-form-field class="task-field" appearance="outline">
  <mat-label>Add task</mat-label>
  <input
    matInput
    [formControl]="search"
    [matAutocomplete]="auto"
    placeholder="Search tasks by name/code/project/client" />

  <mat-autocomplete
    #auto="matAutocomplete"
    [displayWith]="display.bind(this)"
    (optionSelected)="choose($event.option.value)">

    <mat-option *ngFor="let t of results$ | async" [value]="t">
      <div class="opt">
        <div class="line1">
          <span class="client">{{ t.project.client.name }}</span>
          <span class="sep">/</span>
          <span class="project">{{ t.project.name }}</span>
          <span class="dot">â€¢</span>
          <span class="name">{{ t.name }}</span>
          <span class="code" *ngIf="t.code">[{{ t.code }}]</span>
        </div>
        <div class="line2" *ngIf="t.isBillable !== undefined">
          <span class="pill" [class.billable]="t.isBillable" [class.nonbillable]="!t.isBillable">
            {{ t.isBillable ? 'Billable' : 'Non-billable' }}
          </span>
          <span class="pill muted" *ngIf="!t.isActive">Inactive</span>
        </div>
      </div>
    </mat-option>

  </mat-autocomplete>
</mat-form-field>
